db:
  ignore_unknown_table_columns: false

log:
  level: debug  # Set to "debug" for local testing, "panic" for minimal logs
  leak_sensitive_values: true
  redaction_text: ""
  format: json

# serve:
#   public:
#     port: 4444  # Local public port
#     host: localhost
#     cors:
#       enabled: true
#       allowed_origins:
#         - "*"
#       allowed_methods:
#         - GET
#         - POST
#       allowed_headers:
#         - "*"
#       exposed_headers:
#         - "*"
#       allow_credentials: true
#       max_age: 3600
#       debug: true
#     tls:
#       enabled: false  # Disable TLS for local testing, switch to true for prod
#   admin:
#     port: 4445  # Local admin port
#     host: localhost
#     cors:
#       enabled: true
#       allowed_origins:
#         - "*"
#       allowed_methods:
#         - GET
#         - POST
#     tls:
#       enabled: false  # Disable TLS for admin
#   cookies:
#     same_site_mode: Strict
#     same_site_legacy_workaround: true
#     secure: false  # Set to true for production
#     domain: ""
#     names:
#       login_csrf: "login_csrf_cookie"
#       consent_csrf: "consent_csrf_cookie"
#       session: "hydra_session"
#     paths:
#       session: "/"


clients:
  http:
    disallow_private_ip_ranges: true
    private_ip_exception_urls:
      - "http://localhost:3000"  # Example allowed URL

webfinger:
  jwks:
    broadcast_keys: 
      - hydra.jwt.access-token
  oidc_discovery:
    jwks_url: http://localhost:4444/.well-known/jwks.json
    token_url: http://localhost:4444/oauth2/token
    auth_url: http://localhost:4444/oauth2/auth
    client_registration_url: http://localhost:4444/clients
    userinfo_url: http://localhost:4444/userinfo

oidc:
  subject_identifiers:
    supported_types:
      - public
    pairwise:
      salt: some-random-salt
  dynamic_client_registration:
    enabled: false  # Disable dynamic client registration for local testing

urls:
  self:
    issuer: http://localhost:4444/
    public: http://localhost:4444/
    admin: http://localhost:4445/
  login: "http://localhost:3000/login"
  registration: "http://localhost:3000/registration"
  consent: "http://localhost:3000/consent"
  logout: "http://localhost:3000/logout"
  error: "http://localhost:3000/error"
  post_logout_redirect: "http://localhost:3000/logout-successful"

strategies:
  scope: exact
  access_token: opaque

ttl:
  login_consent_request: 1h
  access_token: 1h
  refresh_token: 1h
  id_token: 1h
  auth_code: 1h

oauth2:
  expose_internal_errors: true
  session:
    encrypt_at_rest: false
  exclude_not_before_claim: true
  allowed_top_level_claims:
    - username
    - email
    - user_uuid
  pkce:
    enforced: true

secrets:
  system:
    - "B9jCbnVdYLJeBLtXxnerMuRfP0qHPA=="
  cookie:
    - "ibEyB8UUG0/byUBaLjTlTnmYlfWwlw=="

# tracing:
#   provider: jaeger
#   service_name: Ory Hydra
#   deployment_environment: local
#   jaeger:
#     local_agent_address: 127.0.0.1:6831
#     sampling:
#       server_url: http://localhost:5778/sampling
#       trace_id_ratio: 0.5
#   zipkin:
#     server_url: http://localhost:9411/api/v2/spans
#     sampling:
#       sampling_ratio: 0.4

profiling: cpu
dev: true  # Enable for local dev mode

# Feature flags for testing purposes, disable in prod
feature_flags: {}

version: v0.0.0
